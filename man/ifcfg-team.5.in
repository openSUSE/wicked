.\" Automatically generated by Pandoc 2.18
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "IFCFG-TEAM" "5" "January 29, 2024" "Wicked User Manual" ""
.hy
.SH NAME
.PP
ifcfg-team - interface team configuration
.SH SYNOPSIS
.PP
\f[V]/etc/sysconfig/network/ifcfg-*\f[R]
.SH Team Interfaces
.PP
To setup a team interface you need a configuration file ifcfg-team<X>
with the usual network settings.
But you must add additional variables
.TP
\f[V]TEAM_RUNNER\f[R]
must be set to one of the following types to identify this interface as
a team interface:
.RS
.PP
\f[B]broadcast\f[R] \[en] Team device transmits packets via all its
ports.
.PP
\f[B]roundrobin\f[R] \[en] Team device transmits packets via all its
ports with round-robin method.
.PP
\f[B]activebackup\f[R] \[en] Team device monitors ports\[cq] link
changes and uses port with active link to transmit packets.
.PP
\f[B]loadbalance\f[R] \[en] Team device transmits packets via all its
ports performing load balancing (passive or active) with a use of hash
functions.
For passive load balancing only BPF hash function is used.
For active load balancing runner finds best balance by moving hashes
between available ports.
.PP
\f[B]lacp\f[R] \[en] Implements 802.3ad LACP protocol.
.RE
.SH ACTIVE-BACKUP RUNNER SPECIFIC OPTIONS
.TP
\f[V]TEAM_AB_HWADDR_POLICY\f[R]
Determines the hardware addresses assignment for team device instance
and its ports.
This assignment is performed during team device instance creation and
also for each new port added to the existing instance.
The followingi modes are available:
.RS
.PP
\f[B]same_all\f[R] \[en] All ports will always have the same hardware
address as the associated team device.
.PP
\f[B]by_active\f[R] \[en] Team device adopts the hardware address of the
currently active port.
This is useful when the port device is not able to change its hardware
address.
.PP
\f[B]only_active\f[R] \[en] Only the active port adopts the hardware
address of the team device.
The others have their own.
.PP
Default: \f[B]same_all\f[R]
.RE
.SH LOAD BALANCE RUNNER SPECIFIC OPTIONS
.TP
\f[V]TEAM_LB_TX_HASH\f[R]
A list of string elements separated by a comma \[lq]\f[V],\f[R]\[rq]
which should be used for packet Tx hash computation.
The following elements are available:
.RS
.PP
\f[B]eth\f[R] \[en] Uses source and destination MAC addresses.
.PP
\f[B]vlan\f[R] \[en] Uses VLAN id.
.PP
\f[B]ipv4\f[R] \[en] Uses source and destination IPv4 addresses.
.PP
\f[B]ipv6\f[R] \[en] Uses source and destination IPv6 addresses.
.PP
\f[B]ip\f[R] \[en] Uses source and destination IPv4 and IPv6 addresses.
.PP
\f[B]l3\f[R] \[en] Uses source and destination IPv4 and IPv6 addresses.
.PP
\f[B]tcp\f[R] \[en] Uses source and destination TCP ports.
.PP
\f[B]udp\f[R] \[en] Uses source and destination UDP ports.
.PP
\f[B]sctp\f[R] \[en] Uses source and destination SCTP ports.
.PP
\f[B]l4\f[R] \[en] Uses source and destination TCP and UDP and SCTP
ports.
.RE
.TP
\f[V]TEAM_LB_TX_BALANCER_NAME\f[R]
Name of active Tx balancer.
Currently only supported value is \f[B]basic\f[R].
.TP
\f[V]TEAM_LB_TX_BALANCER_INTERVAL\f[R]
Rebalancing interval.
To be specified in tenths of a second.
.RS
.PP
Default: 50
.RE
.SH LACP RUNNER SPECIFIC OPTIONS
.TP
\f[V]TEAM_LACP_ACTIVE\f[R]
Active mode enables sending LACPDU frames through configured link
periodically.
.RS
.PP
Default: \f[B]true\f[R]
.RE
.TP
\f[V]TEAM_LACP_SYS_PRIO\f[R]
System priority, value can be 0 - 65535.
.RS
.PP
Default: \f[B]255\f[R]
.RE
.TP
\f[V]TEAM_LACP_FAST_RATE\f[R]
Fast rate asks link partner to transmit LACPDU frames once per second.
Otherwise they are sent every 30 seconds.
.RS
.PP
Default: \f[B]true\f[R]
.RE
.TP
\f[V]TEAM_LACP_MIN_PORTS\f[R]
Minimum number of active ports required to assert carrier in master
device.
Value can be 1 - 255.
.RS
.PP
Default: \f[B]0\f[R]
.RE
.TP
\f[V]TEAM_LACP_SELECT_POLICY\f[R]
The policy of how the aggregators will be selected.
The following are available:
.RS
.PP
\f[B]lacp_prio\f[R] \[en] Aggregator with highest priority according to
LACP standard will be selected.
Aggregator priority is affected by per-port option \[lq]lacp_prio\[rq].
.PP
\f[B]lacp_prio_stable\f[R] \[en] Same as previous one, except do not
replace selected aggregator if it is still usable.
.PP
\f[B]bandwidth\f[R] \[en] Select aggregator with highest total
bandwidth.
.PP
\f[B]count\f[R] \[en] Select aggregator with highest number of ports.
.PP
\f[B]port_options\f[R] \[en] Aggregator with highest priority according
to per-port options \f[B]prio\f[R] and \f[B]sticky\f[R] will be
selected.
This means that the aggregator containing the port with the highest
priority will be selected unless at least one of the ports in the
currently selected aggregator is sticky.
.PP
Default: \f[B]lacp_prio\f[R]
.RE
.TP
\f[V]TEAM_LACP_TX_HASH\f[R]
Same as for loadbalancer runner.
Please refer to the section above.
.TP
\f[V]TEAM_LACP_TX_BALANCER\f[R]
Same as for loadbalancer runner.
Please refer to the section above.
.TP
\f[V]TEAM_LACP_TX_BALANCER_INTERVAL\f[R]
Same as for loadbalancer runner.
Please refer to the section above.
.SH LINK WATCH OPTIONS
.TP
\f[V]TEAM_LINK_WATCH_POLICY\f[R]
Declare name of link-watchers evaluation policy.
The following options are available:
.RS
.PP
\f[B]any\f[R] \[en] Link is up if any of the link-watchers reports the
link up.
.PP
\f[B]all\f[R] \[en] Link is up if all of the link-watchers reports the
link up.
.PP
Default: \f[B]any\f[R]
.RE
.TP
\f[V]TEAM_LW_NAME[SUFFIX]\f[R]
Declares the type name of link watch (with the specified unique watch
suffix).
To declare several link watches, append the same suffix to all variables
of one watch.
The following types are available:
.RS
.PP
\f[B]ethtool\f[R] \[en] Uses Libteam lib to get port ethtool state
changes.
.PP
\f[B]arp_ping\f[R] \[en] ARP requests are sent through a port.
If an ARP reply is received, the link is considered to be up.
.PP
\f[B]nsna_ping\f[R] \[en] Similar to the previous, except that it uses
IPv6 Neighbor Solicitation / Neighbor Advertisement mechanism.
.RE
.SH ETHTOOL LINK WATCH SPECIFIC OPTIONS
.TP
\f[V]TEAM_LW_ETHTOOL_DELAY_UP[SUFFIX]\f[R]
Delay between the link coming up and the runner being notified about it
(in milliseconds).
.RS
.PP
Default: \f[B]0\f[R]
.RE
.TP
\f[V]TEAM_LW_ETHTOOL_DELAY_DOWN[SUFFIX]\f[R]
Delay between the link going down and the runner being notified about it
(in milliseconds).
.RS
.PP
Default: \f[B]0\f[R]
.RE
.SH ARP PING LINK WATCH SPECIFIC OPTIONS
.TP
\f[V]TEAM_LW_ARP_PING_SOURCE_HOST[SUFFIX]\f[R]
Hostname or IP address used in ARP request as source address.
.RS
.PP
Default: \f[B]0.0.0.0\f[R]
.RE
.TP
\f[V]TEAM_LW_ARP_PING_TARGET_HOST[SUFFIX]\f[R]
Hostname or IP address used in ARP request as destination address.
.TP
\f[V]TEAM_LW_ARP_PING_INTERVAL[SUFFIX]\f[R]
Interval between ARP requests being sent (in milliseconds).
.TP
\f[V]TEAM_LW_ARP_PING_INIT_WAIT[SUFFIX]\f[R]
Delay between link watch initialization and the first ARP request being
sent (in milliseconds).
.RS
.PP
Default: \f[B]0\f[R]
.RE
.TP
\f[V]TEAM_LW_ARP_PING_VALIDATE_ACTIVE[SUFFIX]\f[R]
Validate received ARP packets on active ports.
Otherwise all incoming ARP packets will be considered as a good reply.
.RS
.PP
Default: \f[B]false\f[R]
.RE
.TP
\f[V]TEAM_LW_ARP_PING_VALIDATE_INACTIVE[SUFFIX]\f[R]
Validate received ARP packets on inactive ports.
Otherwise all incoming ARP packets will be considered as a good reply.
.RS
.PP
Default: \f[B]false\f[R]
.RE
.TP
\f[V]TEAM_LW_ARP_PING_SEND_ALWAYS[SUFFIX]\f[R]
Allow sending ARP requests on inactive ports.
.RS
.PP
Default: \f[B]false\f[R]
.RE
.TP
\f[V]TEAM_LW_ARP_PING_MISSED_MAX[SUFFIX]\f[R]
Maximum number of missed ARP replies.
If this number is exceeded, link is reported as down.
.RS
.PP
Default: \f[B]3\f[R]
.RE
.SH NS/NA PING LINK WATCH SPECIFIC OPTIONS
.TP
\f[V]TEAM_LW_NSNA_PING_TARGET_HOST[SUFFIX]\f[R]
Hostname or IPv6 address used in NS packet as target address.
.TP
\f[V]TEAM_LW_NSNA_PING_INTERVAL[SUFFIX]\f[R]
Interval between sending NS packets (in milliseconds).
.TP
\f[V]TEAM_LW_NSNA_PING_INIT_WAIT[SUFFIX]\f[R]
Delay between link watch initialization and the first NS packet being
sent (in milliseconds).
.TP
\f[V]TEAM_LW_NSNA_PING_MISSED_MAX[SUFFIX]\f[R]
Maximum number of missed NA reply packets.
If this number is exceeded, link is reported as down.
.RS
.PP
Default: \f[B]3\f[R]
.RE
.SH TEAM PORT SPECIFIC OPTIONS
.TP
\f[V]TEAM_PORT_DEVICE[SUFFIX]\f[R]
Port device name.
This option must not be empty for a given port.
.TP
\f[V]TEAM_PORT_QUEUE_ID[SUFFIX]\f[R]
ID of queue which this port should be mapped to.
.RS
.PP
Default: \f[B]None\f[R]
.RE
.TP
\f[V]TEAM_PORT_STICKY[SUFFIX]\f[R]
Marks an activebackup runner port as sticky, to not deselect it, if
another port with a higher priority or better parameters becomes
available.
.RS
.PP
Default: \f[B]false\f[R]
.RE
.TP
\f[V]TEAM_PORT_PRIO[SUFFIX]\f[R]
Port priority in activebackup runner.
The higher number means higher priority.
.RS
.PP
Default: \f[B]0\f[R]
.RE
.TP
\f[V]TEAM_PORT_LACP_PRIO[SUFFIX]\f[R]
Port priority according to LACP standard.
The lower number means higher priority.
.RS
.PP
Default: \f[B]0\f[R]
.RE
.TP
\f[V]TEAM_PORT_LACP_KEY[SUFFIX]\f[R]
Port key according to LACP standard.
It is only possible to aggregate ports with the same key.
.RS
.PP
Default: \f[B]0\f[R]
.RE
.SH EXAMPLE
.PP
Example for a teaming interface on eth0 and eth1 using the backup mode
.IP
.nf
\f[C]
   STARTMODE=auto
   BOOTPROTO=static
   #IPADDR=...

   TEAM_RUNNER=\[dq]loadbalance\[dq]
   TEAM_LB_TX_HASH=\[dq]ipv4,ipv6,eth,vlan\[dq]
   TEAM_LB_TX_BALANCER_NAME=\[dq]basic\[dq]
   TEAM_LB_TX_BALANCER_INTERVAL=\[dq]100\[dq]

   TEAM_PORT_DEVICE_1=\[dq]eth1\[dq]
   TEAM_PORT_DEVICE_2=\[dq]eth2\[dq]

   TEAM_LW_NAME=\[dq]ethtool\[dq]
   TEAM_LW_ETHTOOL_DELAY_UP=\[dq]10\[dq]
   TEAM_LW_ETHTOOL_DELAY_DOWN=\[dq]10\[dq]
   # optionally, further watches, e.g:
   TEAM_LW_NAME_1=\[dq]nsna_ping\[dq]
   TEAM_LW_NSNA_PING_INTERVAL_1=\[dq]100\[dq]
   TEAM_LW_NSNA_PING_MISSED_MAX_1=\[dq]30\[dq]
   TEAM_LW_NSNA_PING_TARGET_HOST_1=\[dq]fe80::1\[dq]
\f[R]
.fi
.SH Additional Information
.PP
For additional and more general information take a look into
<https://github.com/jpirko/libteam/wiki> or \f[I]teamd.conf\f[R](5).
.PP
The configuration of routes for this kind of interface does not differ
from ordinary interfaces.
See \f[I]man routes\f[R] for details.
.SH COPYRIGHT
.PP
Copyright (C) 2015-2022 SUSE LLC
.SH BUGS
.PP
Please report bugs at <http://bugs.opensuse.org>
.SH SEE ALSO
.PP
\f[B]\f[VB]teamd.conf\f[B]\f[R] (5), \f[B]\f[VB]ifcfg\f[B]\f[R] (5),
\f[B]\f[VB]wicked\f[B]\f[R] (8), \f[B]\f[VB]teamd\f[B]\f[R] (8),
\f[B]\f[VB]teamdctl\f[B]\f[R] (8)
.SH AUTHORS
Pawel Wieczorkiewicz \[en] original wireless man page, Clemens
Famulla-Conrad.
